
{% extends 'base.html' %}
{% load static %}

{% block extra_head %}
<!-- AOS CSS -->
<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
<!-- Swiper CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
<link rel="stylesheet" href="{% static 'css/slider.css' %}">
{% endblock %}

{% block content %}
<!-- Hero Section with Swiper -->
<div class="hero-section">
  <div class="swiper hero-swiper">
    <div class="swiper-wrapper">
      <!-- 슬라이드 1: 병원 소개 -->
      <div class="swiper-slide">
        <div class="hero-text">
        <h1 class="intro-heading">온전한 회복과<br><br>새로운 시작 <br><br>온새동물의료센터</h1>
          <a href="{% url 'hospital:intro' %}" class="intro-btn">병원 소개</a>
        </div>
      </div>
      
      <!-- 슬라이드 2: 의료진 소개 -->
      <div class="swiper-slide">
        <div class="hero-text">
          <h1 class="intro-heading">온전한 회복과<br><br>새로운 시작 <br><br>온새동물의료센터</h1>
          <a href="{% url 'hospital:doctor_list' %}" class="intro-btn">의료진 소개</a>
        </div>
      </div>
      
      <!-- 슬라이드 3: 지속가능한 치료 -->
      <div class="swiper-slide">
        <div class="hero-text">
          <h1 class="intro-heading">온전한 회복과<br><br>새로운 시작 <br><br>온새동물의료센터</h1>
          <a href="{% url 'hospital:location' %}" class="intro-btn">오시는길</a>
        </div>
      </div>

    </div>
    
    <!-- 네비게이션 버튼 -->
    <div class="swiper-button-next"></div>
    <div class="swiper-button-prev"></div>
    
    <!-- 페이지네이션 -->
    <div class="swiper-pagination"></div>
  </div>
</div>

<div class="inner">
  <main>
    <!-- 서비스 목록 - AOS 페이드업 효과 -->
    <section class="list-container" data-aos="fade-up" data-aos-duration="800" data-aos-delay="100">
      <a href="{% url 'medical:checkup' %}" class="service-box">
        <div class="service-image">
          <img src="{% static 'images/건강검진.png' %}" alt="건강검진">
        </div>
        <span class="service-name">건강검진</span>
      </a>
      <a href="{% url 'medical:internal' %}" class="service-box">
        <div class="service-image">
          <img src="{% static 'images/일반내과.png' %}" alt="일반내과">
        </div>
        <span class="service-name">일반내과</span>
      </a>
      <a href="{% url 'medical:special' %}" class="service-box">
        <div class="service-image">
          <img src="{% static 'images/중증내과.png' %}" alt="중증내과">
        </div>
        <span class="service-name">중증내과</span>
      </a>
      <a href="{% url 'medical:surgery' %}" class="service-box">
        <div class="service-image">
          <img src="{% static 'images/외과.png' %}" alt="외과">
        </div>
        <span class="service-name">외과</span>
      </a>
      <a href="{% url 'medical:dental' %}" class="service-box">
        <div class="service-image">
          <img src="{% static 'images/치과.png' %}" alt="치과">
        </div>
        <span class="service-name">치과</span>
      </a>
    </section>

    <!-- 진료안내 섹션 - AOS 페이드업 효과 -->
    <section class="notice" data-aos="fade-up" data-aos-duration="800" data-aos-delay="200">
      <div class="notice-header">
        <h2>진료안내</h2>
      </div>
      
      <div class="notice-content">
        <div class="notice-box">
          <div class="notice-box-header">
            <h3>공지사항</h3>
            <a href="{% url 'community:notice_list' %}" class="plus-link">+</a>
          </div>
          <ul class="notice-list">
            {% if notices %}
              {% for notice in notices %}
                <li>
                  <span class="title">{{ notice.title }}</span>
                  <span class="date">{{ notice.created_at|date:"y.m.d" }}</span>
                </li>
              {% endfor %}
            {% else %}
              <li>
                <span class="title">2025년 5월 진료일정</span>
                <span class="date">25.04.25</span>
              </li>
              <li>
                <span class="title">2025년 4월 진료일정</span>
                <span class="date">25.03.20</span>
              </li>
              <li>
                <span class="title">2025년 3월 진료일정</span>
                <span class="date">25.02.19</span>
              </li>
            {% endif %}
          </ul>
        </div>
        
        <div class="notice-box">
          <div class="notice-box-header">
            <h3>이벤트</h3>
            <a href="{% url 'community:event_list' %}" class="plus-link">+</a>
          </div>
          <ul class="notice-list">
            {% if events %}
              {% for event in events %}
                <li>
                  <span class="title">{{ event.title }}</span>
                  <span class="date">{{ event.created_at|date:"y.m.d" }}</span>
                </li>
              {% endfor %}
            {% else %}
              <li>
                <span class="title">5월 가정의 달 이벤트</span>
                <span class="date">25.05.01</span>
              </li>
              <li>
                <span class="title">4월 봄 이벤트</span>
                <span class="date">25.04.03</span>
              </li>
              <li>
                <span class="title">개원 n주년 이벤트</span>
                <span class="date">25.02.19</span>
              </li>
            {% endif %}
          </ul>
        </div>
      </div>
    </section>

    <!-- 반려동물 생활백서 섹션 - AOS 페이드업 효과 -->
    <section class="guidebook" data-aos="fade-up" data-aos-duration="800" data-aos-delay="300">
      <div class="guidebook-header">
        <h2>반려동물 생활백서</h2>
      </div>
      <div class="guidebook-wrapper">
        {% if tips %}
          <div class="guidebook-card">
            <div class="card-image">
              <img src="{{ tips.0.image.url }}" alt="{{ tips.0.title }}">
            </div>
            <div class="card-content">
              <h3><span>[{{ tips.0.sub_title }}]</span> {{ tips.0.title }}</h3>
            </div>
          </div>
        {% else %}
          <div class="guidebook-card">
            <div class="card-image">
              <img src="{% static 'images/예시1.png' %}" alt="고양이 이미지">
            </div>
            <div class="card-content">
              <h3><span>[집사님들 필독!]</span> 넥카라 싸우기 미션, 실패 없는 팁 전격 공개!</h3>
            </div>
          </div>
        {% endif %}
        <a href="{% url 'community:tips_list' %}" class="more-btn">MORE</a>
      </div>
    </section>

    <!-- 치료케이스 섹션 - AOS 페이드업 효과 -->
    <section class="case" data-aos="fade-up" data-aos-duration="800" data-aos-delay="400">
      <div class="case-header">
        <h2>치료케이스</h2>
      </div>
      
      <!-- 카테고리 탭 -->
      <div class="case-tabs">
        <button class="tab-btn active" data-category="all">전체</button>
        <button class="tab-btn" data-category="internal">내과</button>
        <button class="tab-btn" data-category="surgery">외과</button>
        <button class="tab-btn" data-category="dental">치과</button>
      </div>
      
      <!-- 커스텀 슬라이더 -->
      <div class="case-slider-container">
        <div class="case-slider" id="caseSlider">
          <div class="case-slide-wrapper">
            
            <!-- 슬라이드 1 -->
            <div class="case-slide center" data-category="internal">
              <a href="{% url 'cases:detail' 1 %}" class="case-card">
                <div class="card-image">
                  <img src="{% static 'images/예시1.png' %}" alt="고양이 이미지">
                </div>
                <div class="card-info">
                  <div class="case-tag">[내과]</div>
                  <h3>고양이 중성화 리뷰</h3>
                  <p>안녕하세요! 온새동물의료센터 입니다. 오늘은 약 6개월, 체중 1.3kg 암컷 고양이 중성화 수술을 진행했습니다. 수술 과정과 회복 과정을 자세히 안내드리겠습니다.</p>
                </div>
              </a>
            </div>
            
            <!-- 슬라이드 2 -->
            <div class="case-slide" data-category="surgery">
              <a href="{% url 'cases:detail' 2 %}" class="case-card">
                <div class="card-image">
                  <img src="{% static 'images/예시1.png' %}" alt="강아지 이미지">
                </div>
                <div class="card-info">
                  <div class="case-tag">[외과]</div>
                  <h3>강아지 종양 제거 수술</h3>
                  <p>7세 골든 리트리버의 복부 종양 제거 수술 사례입니다. 조기 발견을 통해 성공적으로 완전 절제가 가능했으며, 현재 건강한 회복 상태를 보이고 있습니다.</p>
                </div>
              </a>
            </div>
            
            <!-- 슬라이드 3 -->
            <div class="case-slide" data-category="dental">
              <a href="{% url 'cases:detail' 3 %}" class="case-card">
                <div class="card-image">
                  <img src="{% static 'images/예시1.png' %}" alt="고양이 이미지">
                </div>
                <div class="card-info">
                  <div class="case-tag">[치과]</div>
                  <h3>고양이 치석 제거 및 치료</h3>
                  <p>5세 페르시안 고양이의 심한 치석과 잇몸염 치료 사례입니다. 전신마취 하에 스케일링과 발치를 진행했으며, 현재 구강 건강이 크게 개선되었습니다.</p>
                </div>
              </a>
            </div>
            
            <!-- 슬라이드 4 -->
            <div class="case-slide" data-category="internal">
              <a href="{% url 'cases:detail' 4 %}" class="case-card">
                <div class="card-image">
                  <img src="{% static 'images/예시1.png' %}" alt="강아지 이미지">
                </div>
                <div class="card-info">
                  <div class="case-tag">[내과]</div>
                  <h3>강아지 위장관 질환 치료</h3>
                  <p>3세 비글의 만성 위장관 질환 치료 사례입니다. 정확한 진단을 통해 맞춤형 치료를 진행했으며, 현재 식욕과 활력이 크게 개선된 상태입니다.</p>
                </div>
              </a>
            </div>
            
            <!-- 슬라이드 5 -->
            <div class="case-slide" data-category="surgery">
              <a href="{% url 'cases:detail' 5 %}" class="case-card">
                <div class="card-image">
                  <img src="{% static 'images/예시1.png' %}" alt="고양이 이미지">
                </div>
                <div class="card-info">
                  <div class="case-tag">[외과]</div>
                  <h3>고양이 골절 수술</h3>
                  <p>1세 고양이의 대퇴골 골절 수술 사례입니다. 정밀한 수술을 통해 완전한 회복을 도모했으며, 현재 정상적인 보행이 가능한 상태로 회복되었습니다.</p>
                </div>
              </a>
            </div>
            
          </div>
        </div>
        
        <!-- 하단 컨트롤 영역 (화살표 + MORE 버튼) -->
        <div class="slider-bottom-controls">
          <button class="slider-btn prev-btn" id="prevBtn">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          
          <a href="{% url 'cases:list' %}" class="more-btn">MORE</a>
          
          <button class="slider-btn next-btn" id="nextBtn">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
      </div>
    </section>
  </main>
</div>

<!-- 오시는 길 섹션 - AOS 페이드업 효과 -->
<section class="directions" data-aos="fade-up" data-aos-duration="800" data-aos-delay="500">
  <div class="directions-header">
    <h2>오시는 길</h2>
  </div>
  
  <div class="directions-content">
    <div class="map-container">
      <div id="map"></div>
    </div>
    
    <div class="address-info">
      <h3>온새동물의료센터 오시는 길</h3>
      <p>경기도 수원시 영통구 봉영로 1587, 2층 201호 (다모아프라자)</p>
      
      <div class="transport-info">
        <p><strong>교통편</strong></p>
        <p>지하철: 수인분당선 영통역 8번 출구에서 도보 3분</p>
        <p>버스: 영통역8번출구. 수원지방법원등기국 하차</p>
        <p>주차: 건물 주차 가능 (주차무료)</p>
      </div>
      
      <div class="clinic-hours">
        <h4>진료시간</h4>
        <div class="hours-list">
          평일 진료시간 | 09:00 ~ 20:00<br>
          주말 진료시간 | 09:00 ~ 17:00<br>
          점심시간 | 13:00 ~ 14:00<br>
          * 19:30 접수 마감<br>
          * 공휴일 휴무
        </div>
      </div>
      
      <div class="contact-info">
        <h4>전화번호</h4>
        <p class="phone-number">031-306-8275</p>
        
        <h4>E-mail</h4>
        <p>onsae0415@naver.com</p>
      </div>
    </div>
  </div>
</section>
{% endblock %}

{% block extra_scripts %}

<!-- Swiper 초기화 -->
<script src="{% static 'js/slider.js' %}"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // AOS 초기화
    AOS.init({
      duration: 800,        // 애니메이션 지속시간
      easing: 'ease-out',   // 이징 함수
      once: true,           // 한 번만 실행
      offset: 50,           // 트리거 오프셋
      delay: 0              // 기본 지연시간
    });
    
    // Swiper 초기화
    const heroSwiper = new Swiper('.hero-swiper', {
      // 자동 재생
      autoplay: {
        delay: 5000,
        disableOnInteraction: false,
      },
      
      // 루프
      loop: true,
      
      // 페이드 효과
      effect: 'fade',
      fadeEffect: {
        crossFade: true
      },
      
      // 네비게이션
      navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
      },
      
      // 페이지네이션
      pagination: {
        el: '.swiper-pagination',
        clickable: true,
      },
      
      // 키보드 컨트롤
      keyboard: {
        enabled: true,
      },
      
      // 터치 제스처
      touchRatio: 1,
      
      // 속도
      speed: 800,
    });

    // 카카오맵 초기화 함수
  function initKakaoMap() {
    // 지도 요소가 존재하는지 확인
    if (document.getElementById('map')) {
      var mapContainer = document.getElementById('map'), // 지도를 표시할 div
          mapOption = { 
              center: new kakao.maps.LatLng(37.2533392, 127.0722967), // 온새동물의료센터 좌표
              level: 3 // 지도의 확대 레벨 (1~14, 숫자가 작을수록 확대)
          };
      
      // 지도 생성
      var map = new kakao.maps.Map(mapContainer, mapOption);
      
      // 마커가 표시될 위치
      var markerPosition = new kakao.maps.LatLng(37.2533392, 127.0722967);
      
      // 마커 생성
      var marker = new kakao.maps.Marker({
          position: markerPosition
      });
      
      // 마커를 지도 위에 표시
      marker.setMap(map);
      
      // 인포윈도우에 표시될 내용
      var iwContent = '<div style="padding:5px;">온새동물의료센터</div>', 
          iwRemoveable = true; // removeable 속성을 true로 설정하면 인포윈도우를 닫을 수 있는 x버튼이 표시됩니다
      
      // 인포윈도우 생성
      var infowindow = new kakao.maps.InfoWindow({
          content : iwContent,
          removable : iwRemoveable
      });
      
      // 인포윈도우를 마커 위에 자동으로 표시
      infowindow.open(map, marker);
      
      // 마커에 클릭이벤트를 등록 (선택사항 - 클릭시 다시 열기)
      kakao.maps.event.addListener(marker, 'click', function() {
            // 마커 위에 인포윈도우를 표시
            infowindow.open(map, marker);  
      });
    }
  }

    // 카카오맵 API가 로드되었는지 확인하는 함수
    function checkKakaoMapsLoaded() {
      if (window.kakao && window.kakao.maps) {
        // API가 로드됨, 지도 객체 초기화
        kakao.maps.load(function() {
          initKakaoMap();
        });
      } else {
        // 아직 로드되지 않음, 100ms 후 다시 확인
        setTimeout(checkKakaoMapsLoaded, 100);
      }
    }

    // 카카오맵 초기화 실행
    checkKakaoMapsLoaded();
  });
</script>
{% endblock %}